#运输层

##概述和运输层服务
- 运输层协议为运行在不同主机上的应用程序之间提供了逻辑通信功能。
- 运输层协议是在端系统中而不是在网络路由器中实现。在发送方，运输层将接收到的来自发送应用进程的报文转换成运输层分组，用因特网术语称其为运输层报文段。可能的方法是，将应用层报文划分成较小的块，
并为每块加上一个运输层首部来创建运输层报文段。然后，在发送方端系统中，运输层将这些报文段传输给网络层，网络层将其封装成网络层分组（一个数据报）并向目的地发送。注意:网络路由器进作用于该数据报的网络层字段，
即他们不会检查封装在该数据报的运输层报文段的字段。在接收方，网络层在数据报中提取运输层报文段，并将该报文段向上交给运输层。运输层则处理接收到的报文段，使得接收方应用进程可应用该报文段中的数据。
###运输层和网络层的关系
- 运输层为运行在不同主机上的进程之间提供了逻辑通信，而网络层则提供了主机之间的逻辑通信
###因特网运输层概述P126
- UDP和TCP的基本任务是，将两个端系统间IP的交付服务扩展为运行在两个端系统上的进程间的交付服务。将主机间交付扩展到进程间交付，称为运输层的多路复用与多路分解。
- UDP和TCP可以通过在其报文段的首部中添加差错检测字段而提供完整性检查。
- TCP提供可靠数据传输、拥塞控制。
##多路复用与多路分解
- 在目的主机，运输层从紧邻其下的网络层接收报文段。运输层负责将这些报文段中的数据交付给在主机上运行的合适的应用程序。
- 进程（作为网络的一部分）有一个或多个套接字（socket），它相当于从网络向进程传递数据和从进程向网络传递数据的门户。接收主机中的运输层实际上并没有将数据直接交付给进程，而是通过
一个中间的套接字来传递。由于任何时候接收主机上可能有多个套接字，所以每个套接字都有唯一的标识符，标识符格式取决于他是UDP还是TCP。
- 接收主机如何将一个收到的运输层报文段定向到合适的套接字？：为达到这一目的，在每个运输层报文段中设置几个字段。在接收端，运输层检查这些字段并标识出接收套接字，然后将报文段定向到该套接字。
- 将运输层报文段中的数据交付到正确的套接字的工作成为多路分解；
- 从源主机的不同套接字中收集数据块，并为每个数据块封装上首部信息（这将在多路分解上用）从而生成报文段，然后将报文段传递到网络层的工作称为多路复用。 P128 2018年5月22日 12:39:50
- 多路复用的要求：套接字有唯一标识；每个报文段有特殊字段来指示该报文段所要交付的套接字。这些特殊字段是源端口号和目的端口号
- 无连接的多路复用和多路分解：一个UDP套接字是由一个包含目的IP地址和目的端口号的二元组来全面标识的，如果两个UDP报文段有着不同的源IP地址或源端口号，但有着相同的目的IP地址和目的端口号，那么这两个报文段将通过相同的目的套接字定向到相同的目的进程。
- 面向连接的多路复用和多路分解：TCP套接字是由一个四元组（源IP地址、源端口号、目的IP地址、目的端口号）来标识，两个具有不同源IP地址或源端口号的到达的TCP报文段将被定向到两个不同的套接字，除非TCP携带了初始创建连接的请求。
- TCP连接的四元组能够定位到唯一的连接，那么建立在TCP上的HTTP，服务器使用HTTP协议是不是通过这种方式建立的session？？？？？定位到唯一客户机 P132 2018年5月23日 08:35:16

##无连接运输：UDP
###UDP报文段结构
###UDP检验和

##可靠数据传输的原理
###构造可靠数据传输协议
###流水线可靠数据传输协议
###回退N步
###选择重传

##面向连接的运输：TCP
###TCP连接
###TCP报文段结构
###往返时延的估计与超时
###可靠数据传输
###流量控制
###TCP连接管理

##拥塞控制原理
###拥塞原因与开销
###拥塞控制方法
###网络辅助的拥塞控制例子：ATMABR拥塞控制

##TCP拥塞控制